<!DOCTYPE HTML>

<html>

<head>
	<title>Voyage</title>
	<meta charset="utf-8" />
	<meta name="miniprojet" content="width=device-width, initial-scale=1" />
	<link rel="icon" href="./assets/favicon.ico" type="image/gif" sizes="16x16">
	<link rel="stylesheet" href="./assets/css/style.css" />
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<script src="./js/core.js" defer async></script>
	<script src="assets/js/main.js"></script>
	<script src="./js/scripts.js" defer async></script>
</head>


<!-- Modal -->

<div class="wrapper modal" id="myModal"></div>


<!-- Navbar -->
<div id="topnav"></div>


<body>

	<div class="about-row">
		<div class="img-profile">
			<img id="img-avatar" src="./assets/images/ghost-jira-removebg-preview.png" alt="Ghost">
			<input type="file" name="file" id="file" class="input-file" />
			<label class="btn" for="file">editer votre photo</label>
		</div>
		<div class="page-container" id="profile-container">
			<div class="btn" id="settings-btn">
				<i id="settings-i" class="cart fa fa-cogs"></i><a id="settings-a"></i>Paramètres</a>
			</div>
			<h1>Mes Informations</h1>
			<h2>Générales</h2>
			<label>Nom d'utilisateur</label>
			<input class="long-input" type="text" id="uname" name="username" placeholder="John M. Doe">
			<label>Nom</label>
			<input class="long-input" type="text" id="lname" name="lastname" placeholder="John M. Doe">
			<label>Prénom</label>
			<input class="long-input" type="text" id="fname" name="firstname" placeholder="John M. Doe">
			<label>Email</label>
			<input class="long-input" type="email" id="email" name="email" placeholder="john@example.com">
			<a class="btn" id="password-btn">modifier le mot de passe</a>
			<label>Langue par défaut</label>
			<select name="Language">
				<option value="0">Langue sélectionnée</option>
				<option value="1">Français</option>
				<option value="2">Anglais</option>
			</select>
			<h2>Informations civils</h2>
			<label>Adresse</label>
			<input class="long-input" type="text" id="address_rue" name="rue" placeholder="Numéro de Rue et Rue">
			<input type="text" id="address_code_postal" name="codePostal" placeholder="Code Postal">
			<input type="text" id="city" name="city" placeholder="Ville">
			<input type="text" id="country" name="country" placeholder="Pays">

			<h2>Moyen de Paiement</h2>
			<label id="cards">Carte de paiement acceptées</label>
			<div class="cards-container">
				<i class="fa fa-cc-visa" style="color:navy;"></i>
				<i class="fa fa-cc-amex" style="color:blue;"></i>
				<i class="fa fa-cc-mastercard" style="color:red;"></i>
				<i class="fa fa-cc-discover" style="color:orange;"></i>
			</div>
			<input type="text" id="owner" name="card-owner" placeholder="Titulaire de la carte" onfocusout="validateCreditCardOwner()">
			<input class="long-input" type="text" id="card-number" name="card-number" placeholder="Numéro de carte" onfocusout="validateCreditCardNumber()">
			<input type="date" id="date-exp" name="date-expiration" title="Date d'expiration" onfocusout="validateCreditCardDate()">
			<input type="texte" id="cvv" name="cvv-code" placeholder="Code CVV" onfocusout="validateCCVNumber()"><i id="cvv-info"
				class="fa fa-info-circle" title="Il s'agit du cryptogramme au dos de votre carte"></i>
			<a class="btn" id="add-card-btn">ajouter une nouvelle carte <i class="fa fa-plus-circle"></i></a>
			<a class="btn" id="save-btn">enregistrer les modifications</a>
		</div>
	</div>


	<script>

		/* Vérification formulaire */

		// Store the regexes as globals so they're cached and not re-parsed on every call:
		var ownerPattern = /^([^0-9]*)$/;
		var visaPattern = /^(?:4[0-9]{12}(?:[0-9]{3})?)$/;
		var mastPattern = /^(?:5[1-5][0-9]{14})$/;
		var amexPattern = /^(?:3[47][0-9]{13})$/;
		var discPattern = /^(?:6(?:011|5[0-9][0-9])[0-9]{12})$/;

		function validateCreditCardOwner(){
			var cardOwner = document.getElementById("card-owner").value;

			var isOwnerValid = ownerPattern.test(cardOwner) === true;

			if (isOwnerValid != true){
				alert("Le nom du propriétaire de la carte n'est pas valide.");
			}
		}

		function validateCreditCardNumber() {

			var cardNumber = document.getElementById("card-number").value;

			var isVisa = visaPattern.test(cardNumber) === true;
			var isMast = mastPattern.test(cardNumber) === true;
			var isAmex = amexPattern.test(cardNumber) === true;
			var isDisc = discPattern.test(cardNumber) === true;

			if (isVisa || isMast || isAmex || isDisc) {
				// at least one regex matches, so the card number is valid.

				if (isVisa) {
					// Visa-specific logic goes here
				}
				else if (isMast) {
					// Mastercard-specific logic goes here
				}
				else if (isAmex) {
					// AMEX-specific logic goes here
				}
				else if (isDisc) {
					// Discover-specific logic goes here
				}
			}
			else {

				//alert("Veuillez entrer un numéro de carte valide.");
				//Ca marche mais afficher une alerte à chaque onfocusout c'est bien trop pénible pour l'utilisateur
			}
		}

		function validateCreditCardDate(){

		}

		function validateCCVNumber(){

		}

		let email = document.getElementById("email").innerText;
		function validateEmail(email) {
			var re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
			return re.test(String(email).toLowerCase());
		}
	</script>

	<div id="backToTopDiv"></div>


</body>

<!-- Footer -->
<footer id="footer"></footer>

</html>